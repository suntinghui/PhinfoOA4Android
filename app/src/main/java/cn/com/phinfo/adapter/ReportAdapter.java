package cn.com.phinfo.adapter;import java.util.List;import android.app.Activity;import android.content.Intent;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.AdapterView.OnItemClickListener;import android.widget.GridView;import android.widget.ImageView;import android.widget.TextView;import cn.com.phinfo.oaact.R;import cn.com.phinfo.protocol.LURLInterface;import cn.com.phinfo.protocol.SearchReportRun.SearchItem;import com.heqifuhou.adapterbase.MyImgAdapterBaseAbs;import com.heqifuhou.imgutils.BitmapDataListInstanceUtils;import com.heqifuhou.imgutils.FileItem;import com.heqifuhou.imgutils.PhotoAct;import com.heqifuhou.utils.ParamsCheckUtils;public class ReportAdapter extends  MyImgAdapterBaseAbs<SearchItem>{	private Activity act;	public ReportAdapter(Activity act){		this.act = act;	}	@Override	public View getView(int arg0, View arg1, ViewGroup arg2) {		Holder hoder = null;		if (arg1 == null) {			hoder = new Holder();			arg1 = LayoutInflater.from(arg2.getContext()).inflate(					R.layout.adapter_report_item, null);			hoder.photo = (ImageView) arg1.findViewById(R.id.photo);			hoder.thumbnail = (GridView) arg1.findViewById(R.id.thumbnail);			hoder.Name = (TextView) arg1.findViewById(R.id.Name);			hoder.date = (TextView) arg1.findViewById(R.id.date);			hoder.sate = (TextView) arg1.findViewById(R.id.sate);			hoder.address = (TextView) arg1.findViewById(R.id.address);			hoder.comm = (TextView) arg1.findViewById(R.id.comm);			hoder.content = (TextView) arg1.findViewById(R.id.content);			hoder.good = (TextView) arg1.findViewById(R.id.good);			arg1.setTag(hoder);		}else{			hoder = (Holder) arg1.getTag();		}		SearchItem it = this.getItem(arg0);		hoder.Name.setText(it.getOwningUserName());		String s = "日";		if(it.getWorklogType().equals("1")){			s = "日";		}else if(it.getWorklogType().equals("2")){			s = "周";		}		else if(it.getWorklogType().equals("3")){			s = "月";		}		hoder.date.setText(it.getCreatedOn().trim()+" "+s+"报");		hoder.sate.setText(it.getIsRead()?"已读":"");		if(ParamsCheckUtils.isNull(it.getLocation())){			hoder.address.setVisibility(View.GONE);		}else{			hoder.address.setVisibility(View.VISIBLE);			hoder.address.setText(it.getLocation());		}		if(!ParamsCheckUtils.isNull(it.getCommentQty())){			hoder.comm.setText(it.getCommentQty());		}else{			hoder.comm.setText("0");		}		if(!ParamsCheckUtils.isNull(it.getLikeQty())){			hoder.good.setText(it.getLikeQty());		}else{			hoder.good.setText("0");		}		hoder.content.setText(it.getContentBody());		this.getAsyncAvatar(hoder.photo,LURLInterface.GET_AVATAR(it.getOwningUser()),it.getOwningUserName());				hoder.thumbnail.setTag(it);		hoder.myQThumbnailAdapter = new MyQThumbnailAdapter();		hoder.thumbnail.setAdapter(hoder.myQThumbnailAdapter);		hoder.myQThumbnailAdapter.replaceListRef(it.getThumbnailPicUrls());		hoder.thumbnail.setOnItemClickListener(new OnItemClickListener() {			@Override			public void onItemClick(AdapterView<?> arg0, View arg1,					int arg2, long arg3) {				// 将大图放进去可以显示				SearchItem it = (SearchItem) arg0.getTag();				List<FileItem> lstRef = it.getFileItemList();				BitmapDataListInstanceUtils.getRefInstance().clear();				BitmapDataListInstanceUtils.getRefInstance().addAll(lstRef);				Intent i = new Intent(act, PhotoAct.class);				i.putExtra("isNoDel", true);				i.putExtra("ID", arg2);				i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);				act.startActivity(i);			}		});		return arg1;	}	class Holder{		public TextView Name,date,sate,address,comm,good,content;		public ImageView photo;		public GridView thumbnail;		public MyQThumbnailAdapter myQThumbnailAdapter;	}}