package cn.com.phinfo.adapter;import java.util.List;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.TextView;import cn.com.phinfo.oaact.R;import cn.com.phinfo.protocol.NewsDefaultListRun.ImgItem;import cn.com.phinfo.protocol.NewsDefaultListRun.NewsItem;import com.heqifuhou.adapterbase.MyImgAdapterBaseAbs;import com.heqifuhou.utils.ParamsCheckUtils;public class NewsAdapter extends MyImgAdapterBaseAbs<NewsItem> {	@Override	public View getView(int arg0, View arg1, ViewGroup arg2) {		NewsItem it = this.getItem(arg0);		Holder hoder = null;		int type = getItemViewType(arg0);		if (arg1 == null) {			hoder = new Holder();			if (type == 0 || type == 1||type == -1) {				arg1 = LayoutInflater.from(arg2.getContext()).inflate(						R.layout.adapter_new_img_item_left_right, null);				hoder.imgleft = (ImageView) arg1.findViewById(R.id.imgleft);				hoder.imgright = (ImageView) arg1.findViewById(R.id.imgright);			} else if (type == 2) {				arg1 = LayoutInflater.from(arg2.getContext()).inflate(						R.layout.adapter_new_img_item_big, null);				hoder.img[0] = (ImageView) arg1.findViewById(R.id.img1);			} else if (type == 3) {				arg1 = LayoutInflater.from(arg2.getContext()).inflate(						R.layout.adapter_new_img_item_grid, null);				hoder.img[0] = (ImageView) arg1.findViewById(R.id.img1);				hoder.img[1] = (ImageView) arg1.findViewById(R.id.img2);				hoder.img[2] = (ImageView) arg1.findViewById(R.id.img3);				hoder.img[3] = (ImageView) arg1.findViewById(R.id.img4);			}			hoder.title = (TextView) arg1.findViewById(R.id.title);			hoder.deptName = (TextView) arg1.findViewById(R.id.deptName);			hoder.commentCount = (TextView) arg1					.findViewById(R.id.commentCount);			hoder.createdOn = (TextView) arg1.findViewById(R.id.createdOn);			arg1.setTag(hoder);		} else {			hoder = (Holder) arg1.getTag();		}		hoder.title.setText(it.getTitle());		hoder.deptName.setText(it.getDeptName());		hoder.commentCount.setText(it.getCommentCount() + "评论");		hoder.createdOn.setText(it.getCreatedOn());		setImgGone(hoder);		if (type == 0) {			hoder.imgleft.setVisibility(View.VISIBLE);			this.getAsyncBitMap(hoder.imgleft, it.getThumbnailImgPath(),					R.drawable.default_image_layer);		} else if (type == 1) {			hoder.imgright.setVisibility(View.VISIBLE);			this.getAsyncBitMap(hoder.imgright, it.getThumbnailImgPath(),					R.drawable.default_image_layer);		} else if (type == 2) {			hoder.img[0].setVisibility(View.VISIBLE);			this.getAsyncBitMap(hoder.img[0], it.getBigImgPath(),					R.drawable.default_image_layer);		} else if (type == 3) {			for (int i = 0; i < Math.min(it.getImgs().size(), hoder.img.length); i++) {				hoder.img[i].setVisibility(View.VISIBLE);				this.getAsyncBitMap(hoder.img[i], it.getImgs().get(i)						.getThumbnailPath(), R.drawable.default_image_layer);			}		}		// if (it.isImgType()) {		// List<ImgItem> ls = it.getImgs();		// for (int i = 0; i < 4; i++) {		// hoder.img[i].setVisibility(View.INVISIBLE);		// }		// for (int i = 0; i < Math.max(ls.size(), 4); i++) {		// ImgItem imgIT = ls.get(i);		// hoder.img[i].setVisibility(View.VISIBLE);		// this.getAsyncBitMap(hoder.img[i], imgIT.getThumbnailPath(),		// R.drawable.default_image_layer);		// }		// } else {		// List<ImgItem> ls = it.getImgs();		// if (ls.isEmpty()) {		// hoder.img1.setVisibility(View.INVISIBLE);		// } else {		// ImgItem imgIT = ls.get(0);		// hoder.img1.setVisibility(View.VISIBLE);		// this.getAsyncBitMap(hoder.img1, imgIT.getThumbnailPath(),		// R.drawable.default_image_layer);		// }		// }		return arg1;	}	private void setImgGone(Holder hoder) {		for (int i = 0; i < hoder.img.length; i++) {			if(hoder.img[i]!=null){				hoder.img[i].setVisibility(View.GONE);			}		}		if(hoder.imgleft!=null){			hoder.imgleft.setVisibility(View.GONE);		}		if(hoder.imgright!=null){			hoder.imgright.setVisibility(View.GONE);		}	}	public int getItemViewType(int position) {		NewsItem it = this.getItem(position);		if ("LeftTitle".toLowerCase()				.equals(it.getCoverDisplay().toLowerCase())				&& !ParamsCheckUtils.isNull(it.getThumbnailImgPath())) {			return 0;		} else if ("RightTitle".toLowerCase().equals(				it.getCoverDisplay().toLowerCase())				&& !ParamsCheckUtils.isNull(it.getThumbnailImgPath())) {			return 1;		} else if ("BelowTitleBigImg".toLowerCase().equals(				it.getCoverDisplay().toLowerCase())				&& !ParamsCheckUtils.isNull(it.getBigImgPath())) {			return 2;		} else if ("BelowGrid".toLowerCase().equals(				it.getCoverDisplay().toLowerCase())				&& it.getImgs().size() > 0) {			return 3;		}		return -1;	}	public int getViewTypeCount() {		return 4;	}	class Holder {		public TextView title, deptName, commentCount, createdOn;		public ImageView[] img = new ImageView[4];		public ImageView imgleft, imgright;	}}// if (!it.getSend()) {// convertView = LayoutInflater.from(arg2.getContext()).inflate(// R.layout.chatting_item_msg_text_left, null);// } else {// convertView = LayoutInflater.from(arg2.getContext()).inflate(// R.layout.chatting_item_msg_text_right, null);// viewHolder.tryAgain = convertView.findViewById(R.id.tryagin);// viewHolder.progressBar = (ProgressBar)// convertView.findViewById(R.id.progressBar);//// }