package cn.com.phinfo.adapter;import android.view.LayoutInflater;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.ProgressBar;import android.widget.TextView;import cn.com.phinfo.oaact.R;import cn.com.phinfo.protocol.FileSearchRun.UFileItem;import com.heqifuhou.adapterbase.MyAdapterBaseAbs;import com.heqifuhou.utils.ParamsCheckUtils;public class UFileMyAdapter extends MyAdapterBaseAbs<UFileItem> {	private OnUFileItemClickListener listener;	@Override	public View getView(int arg0, View arg1, ViewGroup arg2) {		Holder hoder = null;		if (arg1 == null) {			hoder = new Holder();			arg1 = LayoutInflater.from(arg2.getContext()).inflate(					R.layout.adapter_ufileattache_item, null);			hoder.name = (TextView) arg1.findViewById(R.id.name);			hoder.kbSize = (TextView) arg1.findViewById(R.id.kbSize);			hoder.pic = (ImageView) arg1.findViewById(R.id.pic);			hoder.progressbar = (ProgressBar) arg1.findViewById(R.id.progress);			hoder.state = (TextView) arg1.findViewById(R.id.state);			hoder.createName = (TextView) arg1.findViewById(R.id.createName);			hoder.createDateTime = (TextView) arg1.findViewById(R.id.createDateTime);			hoder.next = arg1.findViewById(R.id.next);			arg1.setTag(hoder);		} else {			hoder = (Holder) arg1.getTag();		}		UFileItem it = this.getItem(arg0);		hoder.name.setText(it.getName());		hoder.createDateTime.setText(it.getCreatedOn());		if(!ParamsCheckUtils.isNull(it.getFileSize())){			hoder.kbSize.setText(it.getFileSize2KB());		}		hoder.createName.setText(it.getCreatedByName());		hoder.pic.setImageResource(it.getImgResId());		if (it.getProgress() > 0) {			hoder.state.setVisibility(View.VISIBLE);			hoder.state.setText(it.getProgress() + "%");			hoder.progressbar.setVisibility(View.VISIBLE);			hoder.progressbar.setProgress(it.getProgress());		} else {			hoder.progressbar.setVisibility(View.GONE);			hoder.state.setVisibility(View.GONE);		}		//点击下拉		hoder.next.setTag(it);		hoder.next.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View arg0) {				if(listener!=null){					UFileItem _it = (UFileItem) arg0.getTag();					listener.onUFileItemListener(_it);				}			}		});		return arg1;	}	//重命名	public void reName(UFileItem it){		boolean bFound =false;		for(int i=0;i<this.getCount();i++){			UFileItem _it = this.getItem(i);			if(_it.isFloder() == it.isFloder()){				if(_it.getId().equals(it.getId())){					remove(i);					bFound= true;					break;				}			}		}		if(bFound){			this.notifyDataSetChanged();		}	}	public interface OnUFileItemClickListener{		void onUFileItemListener(UFileItem it);	}	public void setOnUFileItemClickListener(OnUFileItemClickListener l){		this.listener = l;	}	public void startAll() {		for (int i = 0; i < this.getCount(); i++) {			UFileItem it = this.getItem(i);			it.startDownLoad();		}	}	public void stopAll() {		for (int i = 0; i < this.getCount(); i++) {			UFileItem it = this.getItem(i);			it.stop();		}	}	class Holder {		public TextView name, kbSize, title, state,createDateTime,createName;		public ImageView pic;		public ProgressBar progressbar;		public View next;	}}