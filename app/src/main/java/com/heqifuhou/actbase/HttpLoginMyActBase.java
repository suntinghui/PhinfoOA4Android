package com.heqifuhou.actbase;import java.io.Serializable;import com.heqifuhou.protocolbase.HttpResultBeanBase;import android.content.Intent;import cn.com.phinfo.entity.DataInstance;import cn.com.phinfo.oaact.LoginAct;public abstract class HttpLoginMyActBase extends HttpMyActBase{	protected static final int ID_LOGIN = 0x99;	private boolean bStartActForResult = false;	private int code;	private Intent intents = null;		@Override	protected void onActivityResult(int requestCode, int resultCode, Intent data) {		if (ID_LOGIN == requestCode && resultCode == RESULT_OK) {			onActivityLoginOkResult(data);		}		super.onActivityResult(requestCode, resultCode, data);	}	protected void onActivityLoginOkResult(Object data) {		if (intents != null) {			if (!bStartActForResult) {				super.startActivity(intents);			} else {				super.startActivityForResult(intents, code);			}		}	}		public void onHttpForResult(int id, HttpResultBeanBase obj,Object requestObj) {//		if(obj!=null&&obj.isCODE_801()){//			this.hideLoading();//			removeHttpThread(id);//			//先关闭当前页面，重新登陆//			this.finish();//			DataInstance.getInstance().saveUser("","",null);//			startLoginAct();//			return;//		}		super.onHttpForResult(id, obj,requestObj);	}	protected final boolean startActivityWithLogin(Class<?> cls) {		Intent i = new Intent(this, cls);		i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);		return startActivityWithLogin(i);	}		protected final boolean startActivityWithLogin(Intent intent) {		if(!DataInstance.getInstance().isLogin()){			bStartActForResult = false;			this.intents = intent;			startLoginAct();			return true;		}else{			super.startActivity(intent);			return false;		}	}	protected final boolean startActivityWithLogin(Intent intents, int code) {		if (!DataInstance.getInstance().isLogin()) {			bStartActForResult = true;			this.intents = intents;			this.code = code;			startLoginAct();			return true;		} else {			startActivityForResult(intents, code);			return false;		}	}		protected void startLoginAct(){		Intent intent = new Intent(this,LoginAct.class);		intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);		startActivityForResult(intent, ID_LOGIN);	}	protected void startLoginAct(Object obj){		if (!DataInstance.getInstance().isLogin()) {			Intent intent = new Intent(this,LoginAct.class);			intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);			intent.putExtra("OBJECT",(Serializable)obj);			startActivityForResult(intent, ID_LOGIN);		} else {			this.onActivityLoginOkResult(obj);		}	}}